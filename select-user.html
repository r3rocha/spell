<!DOCTYPE html>
<html lang="en">
    <head>
        <title>Spell, the dog | Kids spelling game</title>
        
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no shrink-to-fit=no">
        <meta http-equiv="x-ua-compatible" content="ie=edge">
        
        <link rel="shortcut icon" type="image/x-icon" href="images/favicon.png" />
        
        <link rel="stylesheet" type="text/css" href="slick/slick.css"/>
        <link rel="stylesheet" type="text/css" href="css/normalize.css">
        <link rel="stylesheet" type="text/css" href="css/bootstrap.min.css">
        <link rel="stylesheet" type="text/css" href="slick/slick-theme.css"/>
        <link rel="stylesheet" type="text/css" href="css/style.css">

        <script src="http://cdnjs.cloudflare.com/ajax/libs/svg.js/2.3.6/svg.min.js"></script>
        <script src="http://code.jquery.com/jquery-2.1.4.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/jqueryui-touch-punch/0.2.3/jquery.ui.touch-punch.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/snap.svg/0.4.1/snap.svg-min.js"></script>
        <script src="js/bootstrap.min.js"></script>
  </head>
  
  <body id="select-user" class="grad">
    <header id="header" class="col-xs-12">
    </header>
    <content id="content" class="row">
      <div id="dog-select" class="col-xs-5 col-xs-offset-1 ">
        <svg id="svg-dog-seluser" class="dog-seluser"></svg>
      </div>
      <div class="add-select col-xs-4 col-xs-offset-1">  
        <div id="create-new">
            <button class="button" type="button" data-toggle="modal" data-target="#addModal"><img src="images/player-new-add.svg" alt="create new player"/></button>
        </div>
        <div id="old-users">
            <!-- <button class="button user1" type="button"><img class="avatar" src="images/avatar/01.svg" alt="player"/><span>Zoe</span></button> -->
            <!-- <button class="button user2" type="button"><img class="avatar" src="images/avatar/10.svg" alt="player"/><span>Arthur</span></button> -->
        </div>
      </div>
    </content>
    <footer id="footer" class="col-xs-12">
      <center>
        <div class="col-xs-5"></div>
        <button class="sound col-xs-1"><span> sound</span></button>
        <button class="music col-xs-1"><span>music</span></button>
        <button class="about col-xs-1" type="button" data-toggle="modal" data-target="#aboutModal"><span>about</span></button>
        <div class="col-xs-5"></div>
      </center>
    </footer>
  


<!-- About modal -->
<div class="modalbig">
  <div class="modal fade" id="aboutModal" tabindex="-1" role="dialog" data-backdrop="static" data-keyboard="false">
    <div class="modal-dialog" role="document">
      <div class="modal-content green">
        <div class="modal-header">
          <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true"></span></button>
          <h4 class="modal-title">About</h4>
        </div>
          <div class="modal-body row">
            <div class="container-fluid bd-example-row">
                <div class="row line1">
                    <svg id="svg-dog-logo" class="dog-logo col-xs-offset-2 col-xs-8"></svg>
                </div>
                <div class="row line2">
                    <button type="button" class="btn-about review col-xs-5"><img src="images/leaveareview.svg" alt="Leave a review"></button>
                    <button type="button" class="btn-about share col-xs-3"><img src="images/share.svg" alt="Share"></button>
                    <a href="mailto:renata@renatarocha.com"><button type="button" class="btn-about contactus col-xs-4"><img class="pt" src="images/contactus.svg" alt="Contact Us"></button></a>
                </div>
                <div class="row line3">
                    <div class="a-about rrlogo col-xs-3 col-xs-offset-2"><a href="http://www.renatarocha.com" target="_blank"><img src="images/RRlogo.svg" alt="Leave a review"/></a></div>
                    <div class="a-about gstlogo col-xs-7"><a href="http://gst.touro.edu/academics/web-and-multimedia-design.php" target="_blank"><img src="images/GSTlogo.svg" alt="GST"/></a></div>
                </div>
                <div class="row line4">
                    <div class="a-about copyright col-xs-12">Â© all rights reserved</div>
                    <div class="a-about music col-xs-12">Music: "Rainbows" by Kevin MacLeod (incompetech.com)<br/> Licensed under Creative Commons: <a href="http://creativecommons.org/licenses/by/3.0/">By Attribution 3.0 License</a></div>
                </div>
            </div>
          </div>
      </div><!-- /.modal-content -->
    </div><!-- /.modal-dialog -->
  </div><!-- /.modal -->
</div> 



<!-- Add + create   modal -->
<div class="modalbig">
  <div class="modal fade" id="addModal" tabindex="-1" role="dialog" data-backdrop="static" data-keyboard="false">

      <div class="modal-dialog" role="document">
        <div class="user-addlogin-modal">
            <div class="modal-content green">
              
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true"></span></button>
                    <h4 class="modal-title adduser">Login or create a new user</h4>
                    <h4 class="modal-title wrong-pass hide">Wrong Password</h4>
                    <h4 class="modal-title forgot-pass hide">Forgot password?</h4>
                    <h4 class="modal-title remember-seccode hide">Remember secret code</h4>
                    <h4 class="modal-title pass-recover hide">Your Password is..</h4>
                    <h4 class="modal-title create-user hide">Create the user</h4>
                    <h4 class="modal-title user-taken hide">Username already taken</h4>
                    <h4 class="modal-title create-seccode hide">Create Secret code</h4>
                    <h4 class="modal-title select-avatar hide">Select your avatar</h4>
                </div>
                    
                <div class="modal-body row">
                    <!-- Login form -->
                    <div id="adduser" class="container-fluid bd-example-row modal-container">
                        <form>
                            <div class="row line1">
                                <div class="form-username col-xs-offset-2 col-xs-8">
                                    <input type="text" placeholder="username" id="username" autocomplete="off"/>
                                </div>
                            </div>
                            <div class="row line2 col-xs-offset-2 col-xs-8">                       
                                <div class="form-pass">
                                    <input type="password" placeholder="password" id="password" autocomplete="off"/>
                                </div>
                            </div>
                            <div id="letsplay" class="row line3">
                                <div class="col-xs-4 col-xs-offset-4">
                                    <button type="submit"><img src="images/letsplay.svg" alt="lets play"/></button>
                                </div>
                            </div>
                        </form>
                        <div class="row line4 col-xs-8 col-xs-offset-2">
                            <button type="button" class="btn-adduser forgot-pass col-xs-6"><img src="images/forgot-pass.svg" alt="Forgot Password"></button>
                            <button type="button" class="btn-adduser create-new col-xs-6"><img src="images/create-new.svg" alt="Create New User"></button>
                        </div>
                    </div>
                    <!-- end of Login form container -->
                  
                    <!-- Wrong Pass -->
                    <div id="wrongpass" class="container-fluid bd-example-row modal-container hide">
                        <div class="row line1">
                            <svg id="svg-dog-wrongpass" class="dog-wrongpass col-xs-offset-1 col-xs-5"></svg>
                            <div class="user-wrongpass col-xs-offset-1 col-xs-5">
                                <button type="button" class="btn-adduser try-again col-xs-12"><img src="images/try-again.svg" alt="Try Again"></button>
                                <button type="button" class="btn-adduser forgot-pass col-xs-9 col-xs-offset-1"><img src="images/forgot-pass.svg" alt="Forgot Password"></button>
                                <button type="button" class="btn-adduser create-new col-xs-9 col-xs-offset-1"><img src="images/create-new.svg" alt="Create New User"></button>
                            </div> 
                        </div>
                    </div>
                    <!-- end of Wrong Pass container -->

                    <!-- Forgot Pass Pass -->
                    <div id="forgotpass" class="container-fluid bd-example-row modal-container hide">
                        <div class="row line1">
                            <svg id="svg-dog-forgotpass" class="dog-forgotpass col-xs-offset-1 col-xs-5"></svg>
                            <form class="col-xs-6">
                                <div class="form-username col-xs-12">
                                    <input type="text" placeholder="username" id="username" autocomplete="off"/>
                                </div>
                                <div id="next" class="col-xs-offset-3 col-xs-5">
                                    <button type="submit"><img src="images/next.svg" alt="next"/></button>
                                    <!-- <span class="toseccode">remember-seccode</span> -->
                                </div>
                            </form>
                        </div>
                    </div>
                    <!-- end of Forgot Pass container -->
                    <!-- Remember sec code -->
                    <div id="remember-seccode" class="container-fluid bd-example-row modal-container hide">
                        <div class="row line1">
                            <svg id="svg-dog-RemSecCode" class="dog-RemSecCode col-xs-offset-2 col-xs-8"></svg>
                        </div>
                        <div class="row line2">                       
                            <div class="RemSecCode-fruit col-xs-4">
                                <h6>Pick your favorite fruit</h6>
                                <span class="fruit one col-xs-4"><img src="images/sc-fruit-1.svg" data-id="one"></span>
                                <span class="fruit two col-xs-4"><img src="images/sc-fruit-2.svg" data-id="two"></span>
                                <span class="fruit three col-xs-4"><img src="images/sc-fruit-3.svg" data-id="three"></span>
                                <span class="fruit four col-xs-4"><img src="images/sc-fruit-4.svg" data-id="four"></span>
                                <span class="fruit five col-xs-4"><img src="images/sc-fruit-5.svg" data-id="five"></span>
                                <span class="fruit six col-xs-4"><img src="images/sc-fruit-6.svg" data-id="six"></span>
                            </div>
                            <div class="RemSecCode-animal col-xs-4">
                                <h6>Pick your favorite animal</h6>
                                <span class="animal one col-xs-4"><img src="images/sc-animal-1.svg" data-id="one"></span>
                                <span class="animal two col-xs-4"><img src="images/sc-animal-2.svg" data-id="two"></span>
                                <span class="animal three col-xs-4"><img src="images/sc-animal-3.svg" data-id="three"></span>
                                <span class="animal four col-xs-4"><img src="images/sc-animal-4.svg" data-id="four"></span>
                                <span class="animal five col-xs-4"><img src="images/sc-animal-5.svg" data-id="five"></span>
                                <span class="animal six col-xs-4"><img src="images/sc-animal-6.svg" data-id="six"></span>
                            </div>
                            <div class="RemSecCode-color col-xs-4">
                                <h6>Pick your favorite color</h6>
                                <span class="color one col-xs-4"><img src="images/sc-color-1.svg" data-id="one"></span>
                                <span class="color two col-xs-4"><img src="images/sc-color-2.svg" data-id="two"></span>
                                <span class="color three col-xs-4"><img src="images/sc-color-3.svg" data-id="three"></span>
                                <span class="color four col-xs-4"><img src="images/sc-color-4.svg" data-id="four"></span>
                                <span class="color five col-xs-4"><img src="images/sc-color-5.svg" data-id="five"></span>
                                <span class="color six col-xs-4"><img src="images/sc-color-6.svg" data-id="six"></span>
                            </div>    
                        </div>
                        <div id="next" class="col-xs-offset-10 col-xs-2">
                            <button type="submit"><img src="images/next.svg" alt="next"/></button>
                            <!-- <span class="toyourpass">yourpass</span> -->
                        </div>
                    </div>
                    <!-- end of Remember sec code form container -->
                    <!-- Your Pass -->
                    <div id="pass-recover" class="container-fluid bd-example-row modal-container hide">
                        <div class="row line1">
                            <svg id="svg-dog-correctpass" class="dog-correctpass col-xs-offset-1 col-xs-5"></svg>
                            <form class="col-xs-6">
                                <div class="form-username col-xs-12">
                                    <input type="text" placeholder="username" id="yourusername" readonly="readonly" autocomplete="off"/>
                                    <input type="text" placeholder="password" id="yourpassword" readonly="readonly" autocomplete="off"/>
                                </div>
                                <div id="next" class="col-xs-offset-3 col-xs-5">
                                    <button type="submit"><img src="images/next.svg" alt="next"/></button>
                                    <!-- <span class="toadduser">toadduser</span> -->
                                </div>
                            </form>
                        </div>
                    </div>
                    <!-- end of Your Pass container -->
                    <!-- Create User & Pass -->
                    <div id="create-user" class="container-fluid bd-example-row modal-container hide">
                        <div class="row line1">
                            <svg id="svg-dog-createuser" class="dog-createuser col-xs-offset-1 col-xs-5"></svg>
                            <form class="col-xs-6">
                                <div class="form-username col-xs-12">
                                    <input type="text" placeholder="username" id="username" autocomplete="off"/>
                                </div>
                                <div class="form-pass">
                                    <input type="password" placeholder="password" id="password" autocomplete="off"/>
                                </div>
                                <div id="next" class="col-xs-offset-3 col-xs-5">
                                    <button type="submit"><img src="images/next.svg" alt="next"/></button>
                                </div>
                            </form>
                            <span class="instruction col-xs-6"><h6>*your username or password must be at least 6 characteres long</h6></span>
                            <br/>
                            <!-- <span class="tousertaken">usertaken</span> -->
                            <!-- <span class="tocreatesc">create Secret Code</span> -->
                        </div>
                    </div>
                    <!-- end of Create User container -->
                    <!-- User taken -->
                    <div id="user-taken" class="container-fluid bd-example-row modal-container hide">
                        <div class="row line1">
                            <svg id="svg-dog-usertaken" class="dog-usertaken col-xs-offset-1 col-xs-5"></svg>
                            <form class="col-xs-6">
                                <div id="back" class="col-xs-offset-3 col-xs-5">
                                    <button type="button"><img src="images/back.svg" alt="back"/></button>
                                </div>
                            </form>
                            <br/>
                            <!-- <span class="tousertaken">usertaken</span> -->
                            <!-- <span class="tocreatesc">create Secret Code</span> -->
                        </div>
                    </div>
                    <!-- end of Forgot Pass container -->
                    <!-- Create sec code -->
                    <div id="create-seccode" class="container-fluid bd-example-row modal-container hide">
                        <div class="row line1">
                            <svg id="svg-dog-CreateSecCode" class="dog-CreateSecCode col-xs-offset-2 col-xs-8"></svg>
                        </div>
                        <div class="row line2">                       
                            <div class="CreateSecCode-fruit col-xs-4">
                                <h6>Pick your favorite fruit</h6>
                                <span class="fruit one col-xs-4"><img src="images/sc-fruit-1.svg" data-id="one"></span>
                                <span class="fruit two col-xs-4"><img src="images/sc-fruit-2.svg" data-id="two"></span>
                                <span class="fruit three col-xs-4"><img src="images/sc-fruit-3.svg" data-id="three"></span>
                                <span class="fruit four col-xs-4"><img src="images/sc-fruit-4.svg" data-id="four"></span>
                                <span class="fruit five col-xs-4"><img src="images/sc-fruit-5.svg" data-id="five"></span>
                                <span class="fruit six col-xs-4"><img src="images/sc-fruit-6.svg" data-id="six"></span>
                            </div>
                            <div class="CreateSecCode-animal col-xs-4">
                                <h6>Pick your favorite animal</h6>
                                <span class="animal one col-xs-4"><img src="images/sc-animal-1.svg" data-id="one"></span>
                                <span class="animal two col-xs-4"><img src="images/sc-animal-2.svg" data-id="two"></span>
                                <span class="animal three col-xs-4"><img src="images/sc-animal-3.svg" data-id="three"></span>
                                <span class="animal four col-xs-4"><img src="images/sc-animal-4.svg" data-id="four"></span>
                                <span class="animal five col-xs-4"><img src="images/sc-animal-5.svg" data-id="five"></span>
                                <span class="animal six col-xs-4"><img src="images/sc-animal-6.svg" data-id="six"></span>
                            </div>
                            <div class="CreateSecCode-color col-xs-4">
                                <h6>Pick your favorite color</h6>
                                <span class="color one col-xs-4"><img src="images/sc-color-1.svg" data-id="one"></span>
                                <span class="color two col-xs-4"><img src="images/sc-color-2.svg" data-id="two"></span>
                                <span class="color three col-xs-4"><img src="images/sc-color-3.svg" data-id="three"></span>
                                <span class="color four col-xs-4"><img src="images/sc-color-4.svg" data-id="four"></span>
                                <span class="color five col-xs-4"><img src="images/sc-color-5.svg" data-id="five"></span>
                                <span class="color six col-xs-4"><img src="images/sc-color-6.svg" data-id="six"></span>
                            </div>    
                        </div>
                        <div id="next" class="col-xs-offset-10 col-xs-2">
                            <button type="submit"><img src="images/next.svg" alt="next"/></button>
                            <!-- <span class="toselect-avatar">Select avatar</span> -->
                        </div>
                    </div>
                    <!-- end of create sec code form container -->
                    <!-- Create Avatar -->
                    <div id="select-avatar" class="container-fluid bd-example-row modal-container hide">
                        <div class="row line1">
                            <svg id="svg-dog-selecteavatar" class="dog-selecteavatar col-xs-offset-4 col-xs-5"></svg>
                        </div>
                        <div class="row line2">                       
                            <div class="select-avatar col-xs-12">
                                <span class="avatar one col-xs-2"><img src="images/avatar/01.svg"></span>
                                <span class="avatar two col-xs-2"><img src="images/avatar/02.svg"></span>
                                <span class="avatar three col-xs-2"><img src="images/avatar/03.svg"></span>
                                <span class="avatar four col-xs-2"><img src="images/avatar/04.svg"></span>
                                <span class="avatar five col-xs-2"><img src="images/avatar/05.svg"></span>
                                <span class="avatar six col-xs-2"><img src="images/avatar/06.svg"></span>
                                <span class="avatar seven col-xs-2"><img src="images/avatar/07.svg"></span>
                                <span class="avatar eight col-xs-2"><img src="images/avatar/08.svg"></span>
                                <span class="avatar nine col-xs-2"><img src="images/avatar/09.svg"></span>
                                <span class="avatar ten col-xs-2"><img src="images/avatar/10.svg"></span>
                                <span class="avatar eleven col-xs-2"><img src="images/avatar/11.svg"></span>
                                <span class="avatar twelve col-xs-2"><img src="images/avatar/12.svg"></span>
                            </div>
                        </div>
                        <div id="next" class="col-xs-offset-10 col-xs-2">
                            <button type="submit"><img src="images/next.svg" alt="next"/></button>
                        </div>
                    </div>
                    <!-- end of create Avatar form container -->

                </div><!-- end modal-body -->
            </div>
      </div>
    </div>
  </div>
</div>

<audio id="background-music" loop autobuffer>
  <source src="sound/rainbows2.mp3" />
</audio>



<script src="https://www.gstatic.com/firebasejs/3.6.3/firebase.js"></script>
<script>
  // Initialize Firebase
  var config = {
    apiKey: "AIzaSyBGLxtDt3wGB-QbRxLN7nlUydZCDzMk7vs",
    authDomain: "spell-thedog.firebaseapp.com",
    databaseURL: "https://spell-thedog.firebaseio.com",
    storageBucket: "spell-thedog.appspot.com",
    messagingSenderId: "708879136829"
  };
  firebase.initializeApp(config);
    var database = firebase.database();
</script>
<script src="js/all.js"></script>

<script type="text/javascript">



//show forgot pass 
$(".forgot-pass").on('click', function(){
    $(".modal-title, .modal-container").addClass("hide");
    $("h4.forgot-pass, #forgotpass").removeClass("hide");
});

//show remember sec code 
$(".toseccode").on('click', function(){
    $(".modal-title, .modal-container").addClass("hide");
    $("h4.remember-seccode, #remember-seccode").removeClass("hide");
});

//show your pass 
$(".toyourpass").on('click', function(){
    $(".modal-title, .modal-container").addClass("hide");
    $("h4.pass-recover, #pass-recover").removeClass("hide");
});

//show add user 
$(".toadduser").on('click', function(){
    $(".modal-title, .modal-container").addClass("hide");
    $("h4.adduser, #adduser").removeClass("hide");
});

//show create user 
$(".create-new").on('click', function(){
    $(".modal-title, .modal-container").addClass("hide");
    $("h4.create-user, #create-user").removeClass("hide");
});

//show user taken 
$(".tousertaken").on('click', function(){
    $(".modal-title, .modal-container").addClass("hide");
    $("h4.user-taken, #user-taken").removeClass("hide");
});

//go back to create user, from user taken
$("#user-taken #back button").on('click', function(){
    $(".modal-title, .modal-container").addClass("hide");
    $("h4.create-user, #create-user").removeClass("hide");
});

//show create sec code 
$(".tocreatesc").on('click', function(){
    $(".modal-title, .modal-container").addClass("hide");
    $("h4.create-seccode, #create-seccode").removeClass("hide");
});

//show Select avatar
$(".toselect-avatar").on('click', function(){
    $(".modal-title, .modal-container").addClass("hide");
    $("h4.select-avatar, #select-avatar").removeClass("hide");
});

//reset modal
$(".close").on('click', function(){
    $(".modal-title, .modal-container").removeClass("hide");
    $("h4.forgot-pass, #forgotpass, h4.remember-seccode, #remember-seccode, h4.pass-recover, #pass-recover, h4.create-user, #create-user, h4.user-taken, #user-taken, h4.create-user, #create-user, h4.create-seccode, #create-seccode, h4.select-avatar, #select-avatar, h4.wrong-pass, #wrongpass").addClass("hide");
});



$("#adduser form button").on('click', function(event) {
    event.preventDefault();
    var user = $("#adduser form #username").val();
    var pass = $("#adduser form #password").val();
    console.log("login:", user, "password:", pass);
    var on_wrong_pass = function() {
        $(".modal-title, .modal-container").addClass("hide");
        $("h4.wrong-pass, #wrongpass").removeClass("hide");
    };
    sign_in_user(user, pass, on_wrong_pass);
});


$("#select-user #remember-seccode .RemSecCode-fruit span, #select-user #remember-seccode .RemSecCode-animal span, #select-user #remember-seccode .RemSecCode-color span, #create-seccode .CreateSecCode-fruit span, #create-seccode .CreateSecCode-animal span, #create-seccode .CreateSecCode-color span, #select-avatar .select-avatar .avatar").on('click', function() {
    $(this).parent().find(".selected").removeClass('selected');
    $(this).addClass('selected');
});

/**************** FORGOT PASSWORD ****************/
$("#forgotpass #next button").on('click', function() {
    event.preventDefault();
    $(".modal-title, .modal-container").addClass("hide");
    $("h4.remember-seccode, #remember-seccode").removeClass("hide");
});

$("#remember-seccode #next button").on('click', function () {
    var code = "";
    $("#select-user #remember-seccode .selected img").each(function() {
        code += $(this).data("id");
    });
    console.log("code", code);
    var user = $("#forgotpass form #username").val();
    remember_password(user, code, function(pass) {
        console.log("pass", pass);
        if (pass) {
            $("#pass-recover form #yourusername").val(user);
            $("#pass-recover form #yourpassword").val(pass);
            $(".modal-title, .modal-container").addClass("hide");
            $("h4.pass-recover, #pass-recover").removeClass("hide");
        } else {
            $(".modal-title, .modal-container").addClass("hide");
            $("h4.wrong-pass, #wrongpass").removeClass("hide");
            console.log("wrong security code");
        }
    })
});

$("#pass-recover #next button").on('click', function() {
    event.preventDefault();
    var user = $("#pass-recover form #yourusername").val();
    var pass = $("#pass-recover form #yourpassword").val();
    console.log("login:", user, "password:", pass);
    var on_wrong_pass = function() {
        $(".modal-title, .modal-container").addClass("hide");
        $("h4.wrong-pass, #wrongpass").removeClass("hide");
    };
    sign_in_user(user, pass, on_wrong_pass);
});

/****************************************************************************/


$("#create-user button").on('click', function(event) {
    event.preventDefault();
    var username = $(this).parent().parent().find("#username").val();
    var password = $(this).parent().parent().find("#password").val();
    var on_exists = function() {
        console.log("ERROR: user is taken");
        $(".modal-title, .modal-container").addClass("hide");
        $("h4.user-taken, #user-taken").removeClass("hide");
        $('.form-username-option').remove();
        // suggest other usernames
        for (var i = 3 ; i >=1 ; i--) {
            var suggested_username = username + i;
            var $input = $('<div class="form-username-option one col-xs-12"><input type="text" readonly="readonly" value="' + suggested_username + '"/></div>');
            $input.on('click', function() {
                console.log("user", $(this).find("input").val());
                $("#create-user #username").val($(this).find("input").val());
                $(".modal-title, .modal-container").addClass("hide");
                $("h4.create-user, #create-user").removeClass("hide");
            });
            $("#user-taken form").prepend($input);
        }

    };
    var on_does_not_exist = function() {
        console.log("user is available, pick the secret code");
        $(".modal-title, .modal-container").addClass("hide");
        $("h4.create-seccode, #create-seccode").removeClass("hide");
    };
    check_if_user_exists(username, on_exists, on_does_not_exist);
});

$("#create-seccode #next").on('click', function() {
    var $selected = $("#create-seccode .CreateSecCode-fruit .selected, #create-seccode .CreateSecCode-animal .selected, #create-seccode .CreateSecCode-color .selected");
    if ($selected.size() === 3) {
        $(".modal-title, .modal-container").addClass("hide");
        $("h4.select-avatar, #select-avatar").removeClass("hide");
    } else {
        console.log("not everything is selected");
    }
});

$("#select-avatar #next").on('click', function() {
    var username = $("#create-user #username").val();
    var password = $("#create-user #password").val();
    var code = "";
    $("#create-seccode .selected img").each(function() {
        code += $(this).data("id");
    });
    var avatar = $("#select-avatar .select-avatar .selected img").attr('src').split('/').reverse()[0];
    console.log("username", username);
    console.log("password", password);
    console.log("code", code);
    console.log("avatar", avatar);
    signup_user(username, password, code, avatar, function() {
        window.location = "/level.html";
    });
});

/*********************** WRONG PASS ***********************/
// try again goes to home of create user
$('#wrongpass .try-again').on('click', function() {
    $(".modal-title, .modal-container").addClass("hide");
    $("h4.adduser, #adduser").removeClass("hide");
});
/**********************************************************/



var svgseluser = Snap("#svg-dog-seluser");
Snap.load("images/dog-seluser.svg", function (f) {
    g = f.select("svg");
    svgseluser.append(g);
});

var svglogo = Snap("#svg-dog-logo");
Snap.load("images/logo.svg", function (f) {
    g = f.select("svg");
    svglogo.append(g);
});

var svgwrongpass = Snap("#svg-dog-wrongpass");
Snap.load("images/dog-wrongpass.svg", function (f) {
    g = f.select("svg");
    svgwrongpass.append(g);
});

var svgforgotpass = Snap("#svg-dog-forgotpass");
Snap.load("images/dog-forgotpass.svg", function (f) {
    g = f.select("svg");
    svgforgotpass.append(g);
});

var svgseccode = Snap("#svg-dog-RemSecCode");
Snap.load("images/dog-RemSecCode.svg", function (f) {
    g = f.select("svg");
    svgseccode.append(g);
});

var svgcorrectpass = Snap("#svg-dog-correctpass");
Snap.load("images/dog-correctpass.svg", function (f) {
    g = f.select("svg");
    svgcorrectpass.append(g);
});

var svgcreateseccode = Snap("#svg-dog-CreateSecCode");
Snap.load("images/dog-CreateSecCode.svg", function (f) {
    g = f.select("svg");
    svgcreateseccode.append(g);
});

var svgcreateuser = Snap("#svg-dog-createuser");
Snap.load("images/dog-createuser.svg", function (f) {
    g = f.select("svg");
    svgcreateuser.append(g);
});

var svgusertaken = Snap("#svg-dog-usertaken");
Snap.load("images/dog-usertaken.svg", function (f) {
    g = f.select("svg");
    svgusertaken.append(g);
});

var svgselecteavatar = Snap("#svg-dog-selecteavatar");
Snap.load("images/dog-selecteavatar.svg", function (f) {
    g = f.select("svg");
    svgselecteavatar.append(g);
});


// on page load, sign out current user
sign_out_user();

load_old_users($("#old-users"), "images/avatar/");



  </script>

  <script>

    /*** sound effects ***/
    // play sound on click
    $("#letsplay img").on('click', play_bubble);
    $(".btn-about img").on('click', play_bubble);
    $("#create-new button, .modalbig button").on('click', play_bubble);
    $(".btn-adduser img").on('click', play_bubble);
    $(".close").on('click', play_click);
    $("#footer button").on('click', play_pop);

    setup_sound($("footer .sound"));
    setup_music($("footer .music"), $("#background-music"));
  </script>



  </body>
</html>